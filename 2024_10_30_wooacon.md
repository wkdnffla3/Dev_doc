ai dl 을 개발 과정에 녹였다.

글로벌 이라는 단어

 aipowerd

존재하고있는 기능들이 ai 의 도움을 받아서 강력하게

automated 
사람이 하는 일을 기계화 시켜 시간과 효율을 챙긱ㄴ다.

time save
고객의 시간 사장의 시간을 아낀다.
실수가 있더라도

리뷰가 즉각 안올라갈떄 영수증이나 적절하지 앟ㄴ은 물품이 있는지 확인해 보자 인피니트 이미지 생성이 될수도 있다.

멀티모델로 만들어 놓은 검색 예제

키워드로 검색할때 나온 데이터에서 계란 김밥만 추출 해주는기능을 한다.


mandao ?
사용자에게 임시로 전달해야하는 컨텐츠가 있는데.....
만들어줘 만들어다오 만다오
클릭 몇번만 해서 전체 플로우를 만들수있는 웹 저작 툴 이라고 할수 있다.

buds 
그룹 전체 서비스이다.

배민 유저 데이터 서비스

광고 추천 프로모션 
사용자 타게팅


10:50 api gate 설계

서버 개발자 권용근 

결재 개발 주분 전시 회원 순으로 개발을 진행해 왔다.

api gateway 가 살렸다

이게 뭔지? 
    - 두 용어에 대한 합성이다
    - api의 관문 역할을 한다.
    정의가 명확하지는 않다.
    언제부터 나온ㄱ넏?

    aws가 시작
    4가지 제품을 전부 본다. 
    zuul aws srpong kong 
    큰범주에서 2가지를 지원
    라우팅 기능을 지원.
    - 서비스들이 있을것이다 이걸 한군데에 모아서 진행
    - 횡단관심사 문제를 다룬다
    - 여러서비스에서 공동적으로 처리하는 서비스 모음집

    - 

왜 이게 필요한지
- 아키텍처 관점에서 본다.
- 배민에서 모놀리틱을 msa로 전환했다
- 왜 msa에서 api gaetway가 필요한지.
- 마이크로 서비스로 쪼개지면서 하나의 서비스로 할수 없다.
- 클라이언트 의존성 증가로 인한 확장성 저하
- 변경이 어려워 진다
- 불필요한 정보가 클라에 노출
- 무분별한 api가 많아진다.
- 클라이언트에 비지니스 정책이 노출이된다.
- 각 서비스에 정책이 있는데 이런 것들이 노출이 된다.

- 클라이언트와 msa 사이에 뭔가가 필요하다.
- 가공된 1차 게이트가 된다.
api gateway pattern 이라 한다.
패턴인거지 gateway는 아니다.
클라이언트와 소통하는 api가 핵심이다.
의존 제거 필요한 정보만 전달 노출 차단.

프론트 서버.
msa에서 도메인들이 분할되면서 발생하는 문제를 프론트 서버가 해소한다.
-

conway's law 

- 프론트 서버는 증가되면서 부담이 될수 있다.

- 횡단간 심사를 공유하는 시스템의 수가 많아질수록 유지 보수에 들어가는 비용이 증가하게 된다.
- 서비스가 늘어가면 ms 가 증가 횡단관심사가 증가된다.
0- msa에서 서비스가 성장할 수록 횡단 관심사 문제도 커진다.
- 횡단관심사 문제를 반드시 해결해야횐다.
- 이걸 해결해주는게 단일 처리 규정이고 이게 api gate way다.

micro sevises pateern 
- 서버단의 횡단 관심사를 해결한다 
- 특정 비즈니스를 해결할수 없다.
- 어느 하나의 비즈니스에 종속이 되면 종속적이게 된다.
- 프록시 정도의 개념을 가지고 있다.
api gateway 패턴에는 api g가 없다





배민에서 적용한 방식

- 프론트 서버와 클라이언트 사이에 있다.
- 인프라가 허용해주는 선에서 플렉시브 하다.
- 논리적 1 어플리 케이션 개념
- 인증 시스템
-  jwt 도입 했다. 문제가 발생 각 시스템에서 인증 관리 로직과 키를 알아야 하는데 이게 불가능하다.
- 변경에 대한 문제 키가 유출 알고리즘의 문제 등에서 문제가 발생하다.
방대하게 커버린 ms 방법에서는 해결이 쉽지 않다
- api gateway 에 대한 내용을 token으로 한다.
- 최소한의 인증처리를 통해서 진행한다.
-



- 라우팅
- 요청대로 어떤 서비스에 정보를 전달할지.
- ip 대역을 활용해 라우팅을 한다.
- 


- 보안
- 

- 흐름제어
- 탄력석 회복력
- 부하 상황에서도 서비스를 안정적으로 쳐낸다.
- 서킷 브레이커
- 







11 : 50  kafka를 이용하는 메시지 플랫폼에서 장애르 겪으며 아키텍쳐를 개선한 이야기.

- 메시지 플랫폼은 서비스로서 인원에게 알림 메시지를 보낸다. 
- 장애가 발생하는 이유
- 내부버그 통신사 fcm 
- 벤더사 장애 벤더사가 관리하니 어쩔수 ㅓㅇㅄ다.
- 내부 버그는 서비스간 의존도 구조가 다르기 때문에 어쩔수 없다
- 통신사는 통신사가 관리.

- 




16:00 0원으로 클라우드 비용 장애 보안까지 한번에 관리하는 밀밀 공개

공태호 클라우드 엔지니어

aws 가늘어나면서 관리 유지보수가 쉽지 않았다
파편화가 심했다. 

표준화라는 이름으로 클라우드 컴플라이언스를 체계적으로 굴리게 되엇따.

중요도와 정책 타입으로 구분한다 가능한 모든 리소스를 대상으로 100여개의 정책을 정한다.
디테일 하게 정책을 구성 한다.


17:00 200억 건의 데이터 처리하기

- 배경설명하기
- 많은데이터가 있고 이런 데이터를 사용할때 관리팀에 ㅁㄴ의하고 데이터 스펙을 협의하고 데이터 전달 방식 협의를 진행한다.
- 모든 데이터에 적용을 하면서 복잡한 그래프가 그려진다. 
- 가운데에 데이터 시스템을 구축하게 된다 한곳에서 모아주기때문

- wooahub
- 200억의 데이터가 적재가 되고 분당 700만의 요청이 들어오게된다.
- 이러한 시스템에서 안정적을 유지하기 위해 견고한 시스템이 요구된다.

- 4가지의 step으로 나눠서 생각해 본다

- 1번쨰 데이터 동합 스텝
- 2번쨰 데이터 처리 스텝
- 데이터 저장 스텝
- 데이터 조회 스텝

- 각각의 스텝마다 어떤 고민을 했는지를 공유 한다.

- back pressure
- 생서ㅏㄴ자 메시지( ) 속도를 조절해 소비자가 안정적으로 데이터를 처리할수 있게 도와주르느 메커니즘
- event driven architecture

- 데이터 전송 데이터 ㅊ통

- publisher 서버
- 카프카로 바로 발행해도 되지 않냐?

- 퍼블리셔를 앞에 둠으로써 이점이 있다
- 23가지의 이점이 있다
- 기술 추상화가 가능하다
    - 기술에 대한 선택권을 가져갈수있다

- 메시지 형상 관리가 가능하다
    - woowa rpc 서버이다
    - 자바 인터페ㅅ이스가 idl 역할을 한다.
    - 샘플 서비스 안에있는 에코를 클라가 호출하면 서버에서는 에코(메서드) 기반으로 작동한다.

    - 넥서스에 메시지 구현체를 놔두면 각 서버에서 메세지를 읽고 우아허브에 요청을 하게 된다.

- 순서 보장이 가능하다.
- 카프카를 통해서 토픽 안에 파티션이 있는데 여기 들어가면 순서를 보장한다.
- 매시지 재발행이 가능하다.
    - 타임 스탬프 기능을 이용해서 리와인드 재발행 하는 구조를 사용하고 있다.
- 컨슘 제어가 가능하다.
    - 스타트와 스탑을 통해 컨슘 시작 중지가 가능하다.


- 데이터 저장
    - 고가용성
        - 안전하게 구성 마스터와 레플리카 1,2,로 구성

    - write & read 성능
        - 분산 처리를 통해 부하분산함으로써 해결
        - 하나의 db 안에 기입하면 DML 성능이 저하된다.
        - 락이 걸리면 부하가 걸린다.
        - 하나의 테이블이 커지는걸 방지하기 위해 나눈다.
        - 수평 파티셔닝을 한다 다양한 전략을 사용해서
        - 하나의 DB에 파티션만 나눈다면 spof scale up 만 가능 
        - 샤딩을 한다 shard
        - 
        - 데이터를 저장할떄
        - 데이터의 특정 속성 기준
        - 파티션 번호를 결정하는 파티셔너와 파티션 넘버를 통해 빠르게 속도 접근이 가능
        - 어플 레벨과 db 레벨에 구현 고민, 

        - 샤딩에 대한 전략 고민
        - 키베이스랑 디렉팅 베이스드롤 쓴다.
        - 다양한 데이터가 저장되고 서빙된다.
        - 키베이스 샤딩
        - 어떤 기준으로 어떤것을 어떤이름으로 저장할지만 개발자가 결정한다.


        - 1억건의 데이터가 몰릴때가있다
        - 성능이 못따라가서 스케일 업을 하거나 증설한다
        -  다만 카프카를 통해 배압을 조절한다.
        - 이벤트 컨슘 속도 조절.

- 네트워크 부분
    - ms 부분을 지향한다.
    - 통신을 위한 효율화가 중점이다.
    - 노드들이 너트워크 코드를 중복 구현 해야된다.

    - 각 환경에 따라 다르게 환경을 설정해야한다
    - 네트워크 라이브러리를 해서 호환되게 하자
    - 스키마 버전 관리 
        - 서버가 스키마를 관리한다.
            - 데이터 일관선 호한성 스키마 관리가 힘들어지게 된다.2
    - 패킷 효율화
    - 환경에 따른 기술 스택 정리
    - 작년에 발표한 우하한 rpc 를 참고하자

